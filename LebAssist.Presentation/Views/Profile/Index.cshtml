@model LebAssist.Presentation.ViewModels.Profile.ProfileViewModel
@{
    ViewData["Title"] = "My Profile";
}

<div class="profile-page">
    <!-- Header Section -->
    <div class="page-header">
        <div class="container">
            <!-- Breadcrumb -->
            <nav class="custom-breadcrumb" aria-label="breadcrumb">
                <ol class="breadcrumb-list">
                    <li class="breadcrumb-item">
                        <a href="@Url.Action("Index", "Home")">
                            <i class="bi bi-house-door"></i>
                            Home
                        </a>
                    </li>
                    <li class="breadcrumb-separator">
                        <i class="bi bi-chevron-right"></i>
                    </li>
                    <li class="breadcrumb-item active">
                        My Profile
                    </li>
                </ol>
            </nav>

            <!-- Page Title -->
            <div class="page-title-section">
                <h1 class="page-title">
                    <i class="bi bi-person-circle"></i>
                    My Profile
                </h1>
                <p class="page-subtitle">View and manage your account information</p>
            </div>
        </div>
    </div>

    <!-- Content Section -->
    <div class="container profile-content">
        <div class="profile-layout">
            <!-- Left Sidebar -->
            <div class="profile-sidebar">
                <div class="profile-photo-card">
                    @if (!string.IsNullOrEmpty(Model.ProfilePhotoPath))
                    {
                        <img src="@Model.ProfilePhotoPath" alt="@Model.FirstName @Model.LastName" class="profile-photo">
                    }
                    else
                    {
                        <div class="profile-photo-placeholder">
                            <i class="bi bi-person-fill"></i>
                        </div>
                    }
                </div>

                <div class="profile-name-card">
                    <h2 class="profile-name">@Model.FirstName @Model.LastName</h2>
                    @if (Model.IsProvider)
                    {
                        <span class="provider-badge">
                            <i class="bi bi-patch-check-fill"></i>
                            Service Provider
                        </span>
                    }
                    <p class="profile-email">
                        <i class="bi bi-envelope"></i>
                        @Model.Email
                    </p>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions-card">
                    <a href="@Url.Action("Edit", "Profile")" class="quick-action-btn">
                        <i class="bi bi-pencil-square"></i>
                        <span>Edit Profile</span>
                    </a>
                    <a href="@Url.Action("ChangePassword", "Profile")" class="quick-action-btn">
                        <i class="bi bi-shield-lock"></i>
                        <span>Change Password</span>
                    </a>
                    @if (Model.IsProvider)
                    {
                        <a href="@Url.Action("Portfolio", "Provider")" class="quick-action-btn">
                            <i class="bi bi-images"></i>
                            <span>My Portfolio</span>
                        </a>
                        <a href="@Url.Action("MyServices", "Provider")" class="quick-action-btn">
                            <i class="bi bi-tools"></i>
                            <span>My Services</span>
                        </a>
                    }
                </div>
            </div>

            <!-- Main Content -->
            <div class="profile-main">
                <!-- Contact Info Card -->
                <div class="info-card">
                    <div class="card-header">
                        <i class="bi bi-telephone-fill"></i>
                        <h3>Contact Information</h3>
                    </div>
                    <div class="card-content">
                        <div class="info-row">
                            <div class="info-label">
                                <i class="bi bi-phone"></i>
                                Phone Number
                            </div>
                            <div class="info-value">
                                @(Model.PhoneNumber ?? "Not provided")
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">
                                <i class="bi bi-geo-alt-fill"></i>
                                Location
                            </div>
                            <div class="info-value">
                                <a href="https://www.google.com/maps?q=@Model.Latitude,@Model.Longitude"
                                   target="_blank"
                                   class="map-link">
                                    <i class="bi bi-pin-map"></i>
                                    View Location on Map
                                </a>
                                @* <div class="coordinates">
                                    @Model.Latitude.ToString("F4"), @Model.Longitude.ToString("F4")
                                </div> *@
                            </div>
                        </div>
                    </div>
                </div>

                @if (Model.IsProvider)
                {
                    <!-- Provider Info Card -->
                    <div class="info-card">
                        <div class="card-header">
                            <i class="bi bi-briefcase-fill"></i>
                            <h3>Provider Information</h3>
                        </div>
                        <div class="card-content">
                            <div class="info-row">
                                <div class="info-label">
                                    <i class="bi bi-award-fill"></i>
                                    Years of Experience
                                </div>
                                <div class="info-value">
                                    <span class="experience-value">
                                        @(Model.YearsOfExperience?.ToString() ?? "0") @(Model.YearsOfExperience == 1 ? "Year" : "Years")
                                    </span>
                                </div>
                            </div>
                            <div class="info-row bio-row">
                                <div class="info-label">
                                    <i class="bi bi-file-text-fill"></i>
                                    About Me
                                </div>
                                <div class="info-value bio-content">
                                    @if (!string.IsNullOrEmpty(Model.Bio))
                                    {
                                        <p>@Model.Bio</p>
                                    }
                                    else
                                    {
                                        <p class="empty-bio">No bio provided yet. Add a bio to tell clients about your expertise and experience.</p>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/profile.css" />
}

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Animate elements on load
            const sidebar = document.querySelector('.profile-sidebar');
            const mainContent = document.querySelector('.profile-main');

            if (sidebar && mainContent) {
                sidebar.style.opacity = '0';
                sidebar.style.transform = 'translateX(-20px)';
                mainContent.style.opacity = '0';
                mainContent.style.transform = 'translateX(20px)';

                setTimeout(() => {
                    sidebar.style.transition = 'all 0.6s ease';
                    sidebar.style.opacity = '1';
                    sidebar.style.transform = 'translateX(0)';
                }, 100);

                setTimeout(() => {
                    mainContent.style.transition = 'all 0.6s ease';
                    mainContent.style.opacity = '1';
                    mainContent.style.transform = 'translateX(0)';
                }, 200);
            }
        });
    </script>
}
