@model LebAssist.Application.DTOs.ClientProfileDto
@{
    ViewData["Title"] = "Application Status";
}

<div class="application-status-page">
    <!-- Header Section -->
    <div class="page-header">
        <div class="container">
            <!-- Breadcrumb -->
            <nav class="custom-breadcrumb" aria-label="breadcrumb">
                <ol class="breadcrumb-list">
                    <li class="breadcrumb-item">
                        <a href="@Url.Action("Index", "Home")">
                            <i class="bi bi-house-door"></i>
                            Home
                        </a>
                    </li>
                    <li class="breadcrumb-separator">
                        <i class="bi bi-chevron-right"></i>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="@Url.Action("Index", "Profile")">
                            <i class="bi bi-person-circle"></i>
                            My Profile
                        </a>
                    </li>
                    <li class="breadcrumb-separator">
                        <i class="bi bi-chevron-right"></i>
                    </li>
                    <li class="breadcrumb-item active">
                        Application Status
                    </li>
                </ol>
            </nav>

            <!-- Page Title -->
            <div class="page-title-section">
                <h1 class="page-title">
                    <i class="bi bi-clipboard-check"></i>
                    Provider Application Status
                </h1>
                <p class="page-subtitle">Check your provider application progress</p>
            </div>
        </div>
    </div>

    <!-- Content Section -->
    <div class="container status-content">
        <div class="status-wrapper">
            <!-- Application Info Card -->
            <div class="info-card">
                <div class="info-card-header">
                    <i class="bi bi-person-circle"></i>
                    <h3>Application Information</h3>
                </div>
                <div class="info-card-body">
                    <div class="info-row">
                        <div class="info-label">
                            <i class="bi bi-person"></i>
                            Name
                        </div>
                        <div class="info-value">@Model.FirstName @Model.LastName</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">
                            <i class="bi bi-calendar"></i>
                            Applied On
                        </div>
                        <div class="info-value">@Model.DateRegistered.ToString("MMMM dd, yyyy")</div>
                    </div>
                </div>
            </div>

            <!-- Status Card -->
            @if (Model.IsProvider && Model.ProviderStatus == Domain.Enums.ProviderStatus.Approved)
            {
                <!-- Approved Status -->
                <div class="status-card status-approved">
                    <div class="status-icon">
                        <i class="bi bi-check-circle-fill"></i>
                    </div>
                    <div class="status-content">
                        <h2 class="status-title">Application Approved!</h2>
                        <p class="status-message">
                            Congratulations! Your provider account has been approved. You can now manage your services,
                            set your availability, and start accepting bookings from clients.
                        </p>
                        <div class="status-actions">
                            <a class="btn btn-success" asp-controller="Provider" asp-action="Dashboard">
                                <i class="bi bi-speedometer2"></i>
                                Go to Provider Dashboard
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Features Info -->
                <div class="features-grid">
                    <div class="feature-card">
                        <i class="bi bi-tools"></i>
                        <h4>Manage Services</h4>
                        <p>Add and update your services</p>
                    </div>
                    <div class="feature-card">
                        <i class="bi bi-calendar-check"></i>
                        <h4>Accept Bookings</h4>
                        <p>Receive and manage bookings</p>
                    </div>
                    <div class="feature-card">
                        <i class="bi bi-lightning"></i>
                        <h4>Emergency Requests</h4>
                        <p>Respond to urgent requests</p>
                    </div>
                    <div class="feature-card">
                        <i class="bi bi-star"></i>
                        <h4>Build Reputation</h4>
                        <p>Earn ratings and reviews</p>
                    </div>
                </div>
            }
            else if (Model.IsProvider == false && Model.ProviderStatus == Domain.Enums.ProviderStatus.Pending)
            {
                <!-- Pending Status -->
                <div class="status-card status-pending">
                    <div class="status-icon">
                        <i class="bi bi-hourglass-split"></i>
                    </div>
                    <div class="status-content">
                        <h2 class="status-title">Application Under Review</h2>
                        <p class="status-message">
                            Your provider application has been submitted successfully and is currently being reviewed by our team.
                            You will receive a notification once a decision is made (usually within 24-48 hours).
                        </p>

                        <div class="timeline-steps">
                            <div class="timeline-step completed">
                                <div class="step-marker">
                                    <i class="bi bi-check"></i>
                                </div>
                                <div class="step-info">
                                    <h5>Application Submitted</h5>
                                    <p>Your application has been received</p>
                                </div>
                            </div>
                            <div class="timeline-step active">
                                <div class="step-marker">
                                    <i class="bi bi-hourglass"></i>
                                </div>
                                <div class="step-info">
                                    <h5>Under Review</h5>
                                    <p>Our team is reviewing your application</p>
                                </div>
                            </div>
                            <div class="timeline-step">
                                <div class="step-marker">
                                    <i class="bi bi-bell"></i>
                                </div>
                                <div class="step-info">
                                    <h5>Decision Notification</h5>
                                    <p>You'll be notified of the outcome</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
            else if (Model.ProviderStatus == Domain.Enums.ProviderStatus.Rejected)
            {
                <!-- Rejected Status -->
                <div class="status-card status-rejected">
                    <div class="status-icon">
                        <i class="bi bi-exclamation-triangle-fill"></i>
                    </div>
                    <div class="status-content">
                        <h2 class="status-title">Application Not Approved</h2>
                        <p class="status-message">
                            Unfortunately, your provider application was not approved at this time. Please review your profile
                            information and ensure all details are accurate and complete before reapplying.
                        </p>

                        <div class="help-box">
                            <i class="bi bi-lightbulb"></i>
                            <div>
                                <strong>Tips for Reapplying:</strong>
                                <ul>
                                    <li>Ensure all required information is complete</li>
                                    <li>Add a detailed bio highlighting your experience</li>
                                    <li>Upload a professional profile photo</li>
                                    <li>Add portfolio photos showcasing your work</li>
                                </ul>
                            </div>
                        </div>

                        <div class="status-actions">
                            <a class="btn btn-primary" asp-controller="Provider" asp-action="Apply">
                                <i class="bi bi-arrow-clockwise"></i>
                                Submit New Application
                            </a>
                        </div>
                    </div>
                </div>
            }
            else
            {
                <!-- No Application -->
                <div class="status-card status-none">
                    <div class="status-icon">
                        <i class="bi bi-file-earmark-plus"></i>
                    </div>
                    <div class="status-content">
                        <h2 class="status-title">No Application Found</h2>
                        <p class="status-message">
                            You haven't submitted a provider application yet. Join our network of service providers
                            and start earning by offering your services to clients.
                        </p>

                        <div class="benefits-grid">
                            <div class="benefit-item">
                                <i class="bi bi-cash-stack"></i>
                                <div>
                                    <strong>Earn Money</strong>
                                    <p>Set your own rates and work schedule</p>
                                </div>
                            </div>
                            <div class="benefit-item">
                                <i class="bi bi-people"></i>
                                <div>
                                    <strong>Grow Your Business</strong>
                                    <p>Connect with new clients in your area</p>
                                </div>
                            </div>
                            <div class="benefit-item">
                                <i class="bi bi-shield-check"></i>
                                <div>
                                    <strong>Be Verified</strong>
                                    <p>Build trust with our verification system</p>
                                </div>
                            </div>
                            <div class="benefit-item">
                                <i class="bi bi-graph-up"></i>
                                <div>
                                    <strong>Track Performance</strong>
                                    <p>Access analytics and insights</p>
                                </div>
                            </div>
                        </div>

                        <div class="status-actions">
                            <a class="btn btn-primary" asp-controller="Provider" asp-action="Apply">
                                <i class="bi bi-person-plus"></i>
                                Apply to Become a Provider
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/applicationStatus.css" />
}

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Animate cards on load
            const cards = document.querySelectorAll('.info-card, .status-card, .features-grid, .feature-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.5s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
}
